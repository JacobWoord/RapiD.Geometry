<UserControl x:Class="RapiD.Geometry.Views.Canvas3DView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:hx="http://helix-toolkit.org/wpf/SharpDX" 
             xmlns:local="clr-namespace:RapiD.Geometry.Views" 
             xmlns:viewmodels="clr-namespace:RapiD.Geometry.ViewModels" xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             d:DataContext="{d:DesignInstance Type=viewmodels:Canvas3DViewModel}"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="auto"/>
        </Grid.RowDefinitions>


        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="200"/>
        </Grid.ColumnDefinitions>

        <Grid       Background="Black"
                    
                    Height="40"
                    Grid.Row="0"
                    Grid.ColumnSpan="3">
            <StackPanel Orientation="Horizontal">
                <Button Margin="5"
                    Command="{Binding GoHomeCommand}"    
                    Background="Black"
                    MinWidth="100"
                    Foreground="White"
                    BorderBrush="White"
                    BorderThickness="2"
                    Content="Home"></Button>

                <Button Margin="5"
                    Command="{Binding DrawTorrusCommand}"    
                    Background="Black"
                    MinWidth="100"
                    Foreground="White"
                    BorderBrush="White"
                    BorderThickness="2"
                    Content="Draw Torrus"></Button>

                <Button Margin="5"
                    Command="{Binding DrawCillinderCommand}"    
                    Background="Black"
                    MinWidth="100"
                    Foreground="White"
                    BorderBrush="White"
                    BorderThickness="2"
                    Content="Draw Cillinder"></Button>

                <Button Margin="5"
                    Command="{Binding DrawTubeCommand}"    
                    Background="Black"
                    MinWidth="100"
                    Foreground="White"
                    BorderBrush="White"
                    BorderThickness="2"
                    Content="Draw Tube"></Button>



            </StackPanel>

        </Grid>

        <Grid Grid.Row="1"
              Grid.ColumnSpan="3">

            <hx:Viewport3DX 
                
                Loaded="Viewport3DX_Loaded"
               IsChangeFieldOfViewEnabled="True"
               ZoomSensitivity="0.9"
            CameraRotationMode="Trackball"
                ShowCoordinateSystem="True"
                 Camera="{Binding Camera}"
                
                ShowCameraInfo="True"
                ZoomExtentsWhenLoaded="True"
                ShowFrameDetails="True"
                BackgroundColor="Black"
                ModelUpDirection="0,0,1"
                InfoForeground="White"
                FixedRotationPointEnabled="True"
                ShowTriangleCountInfo="True"
                InfoBackground="Transparent"
                EnableSwapChainRendering ="True">
                <hx:Viewport3DX.InputBindings>
                    <KeyBinding Key="B" Command="hx:ViewportCommands.BackView"/>
                    <KeyBinding Key="F" Command="hx:ViewportCommands.FrontView"/>
                    <KeyBinding Key="U" Command="hx:ViewportCommands.TopView"/>
                    <KeyBinding Key="D" Command="hx:ViewportCommands.BottomView"/>
                    <KeyBinding Key="L" Command="hx:ViewportCommands.LeftView"/>
                    <KeyBinding Key="R" Command="hx:ViewportCommands.RightView"/>
                    <KeyBinding Command="hx:ViewportCommands.ZoomExtents" Gesture="Control+E"/>
                    <MouseBinding Command="hx:ViewportCommands.Rotate" Gesture="RightClick"/>
                    <!--<MouseBinding Command="hx:ViewportCommands.Zoom" Gesture="MiddleClick"/>-->
                    <MouseBinding Command="hx:ViewportCommands.Pan" Gesture="LeftClick"/>
                </hx:Viewport3DX.InputBindings>
                
                
              

                <!--Lighting-->
                <hx:SpotLight3D Color="Yellow" ></hx:SpotLight3D>
                <hx:AmbientLight3D Color="Gray" ></hx:AmbientLight3D>
                <hx:DirectionalLight3D Color="LightYellow" Direction="0,0,-1" ></hx:DirectionalLight3D>
                
                <!--Models-->
                <hx:ItemsModel3D  ItemsSource="{Binding Geometry3DCollection}" >



                    <hx:ItemsModel3D.ItemTemplate>
                        <DataTemplate>
                            <hx:MeshGeometryModel3D 
                                RenderWireframe="False"
                                EnableViewFrustumCheck="False"
                                CullMode="Back"                              
                                Transform="{Binding Transform}"
                                Geometry="{Binding MeshGeometry}"
                                Material="{Binding CurrentMaterial}">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="Mouse3DDown">
                                        <i:InvokeCommandAction Command="{Binding SelectCommand}"></i:InvokeCommandAction>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </hx:MeshGeometryModel3D>
                        </DataTemplate>
                           
                    </hx:ItemsModel3D.ItemTemplate>

          

                </hx:ItemsModel3D>

                <hx:CoordinateSystemModel3D 
                    AxisXColor="Red"
                    AxisYColor="Green"
                    LabelColor="White"
                    IsRendering="False"
                    CoordinateSystemLabelX="X"
                    CoordinateSystemLabelY="Y"
                    CoordinateSystemLabelZ="Z"
                    AxisZColor="Blue"
                    Mode="AbsolutePosition3D"                  
                    SizeScale="200"                
                    AbsolutePosition3D="0,0,0">

                </hx:CoordinateSystemModel3D>

            </hx:Viewport3DX>

            <!--<ModelVisual3D>
                    <ModelVisual3D.Content>
                        <GeometryModel3D>
                            <GeometryModel3D.Geometry>
                                <MeshGeometry3D x:Name="meshMain"
                        Positions="0 0 0  1 0 0  0 1 0  1 1 0  0 0 1  1 0 1  0 1 1  1 1 1"
                        TriangleIndices="2 3 1  2 1 0  7 1 3  7 5 1  6 5 7  6 4 5  6 2 0  2 0 4  2 7 3  2 6 7  0 1 5  0 5 4">
                                </MeshGeometry3D>
                            </GeometryModel3D.Geometry>
                            <GeometryModel3D.Material>
                                <DiffuseMaterial x:Name="matDiffuseMain">
                                    <DiffuseMaterial.Brush>
                                        <SolidColorBrush Color="Gray"/>
                                    </DiffuseMaterial.Brush>
                                </DiffuseMaterial>
                            </GeometryModel3D.Material>
                        </GeometryModel3D>
                    </ModelVisual3D.Content>
                </ModelVisual3D>
                <HelixToolkit:GridLinesVisual3D Width="8" Length="8" MinorDistance="1" MajorDistance="1" Thickness="0.01"/>
            </HelixToolkit:HelixViewport3D>-->




        </Grid>







            <!--<StackPanel Background="Black"
                    Height="40"
                    Grid.Row="2"
                    Grid.ColumnSpan="3"></StackPanel>-->




    </Grid>
</UserControl>
